(window.webpackJsonp=window.webpackJsonp||[]).push([[180],{652:function(s,t,a){"use strict";a.r(t);var n=a(27),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"一-命令形式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一-命令形式"}},[s._v("#")]),s._v(" 一.命令形式")]),s._v(" "),a("h3",{attrs:{id:"_1-基本操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-基本操作"}},[s._v("#")]),s._v(" 1.基本操作")]),s._v(" "),a("p",[a("strong",[s._v("（1）查看数据库")])]),s._v(" "),a("blockquote",[a("p",[s._v("语法：show databases")])]),s._v(" "),a("p",[a("strong",[s._v("（2）进入/选择数据库")])]),s._v(" "),a("blockquote",[a("p",[s._v("语法：use 数据库名")])]),s._v(" "),a("p",[s._v("注意：选择不存在的数据库不会报错，后期当数据库有数据时，系统会自动创建。")]),s._v(" "),a("p",[a("strong",[s._v("（3）创建数据库")])]),s._v(" "),a("blockquote",[a("p",[s._v("语法：use 数据库名")])]),s._v(" "),a("p",[a("strong",[s._v("（4）删除择数据库")])]),s._v(" "),a("p",[s._v("步骤一：选择数据库")]),s._v(" "),a("blockquote",[a("p",[s._v("语法：use 数据库名")])]),s._v(" "),a("p",[s._v("步骤二：删除数据库")]),s._v(" "),a("blockquote",[a("p",[s._v("语法：db.dropDataBase()")])]),s._v(" "),a("h3",{attrs:{id:"_2-集合基本操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-集合基本操作"}},[s._v("#")]),s._v(" 2.集合基本操作")]),s._v(" "),a("p",[a("strong",[s._v("（1）查看集合")])]),s._v(" "),a("p",[s._v("步骤一：选择数据库")]),s._v(" "),a("blockquote",[a("p",[s._v("语法：use 数据库名")])]),s._v(" "),a("p",[s._v("步骤二：查看集合")]),s._v(" "),a("blockquote",[a("p",[s._v("语法：show collections")])]),s._v(" "),a("p",[a("strong",[s._v("（2）创建集合")])]),s._v(" "),a("p",[s._v("步骤一：选择数据库")]),s._v(" "),a("blockquote",[a("p",[s._v("语法：use 数据库名")])]),s._v(" "),a("p",[s._v("步骤二：创建集合")]),s._v(" "),a("blockquote",[a("p",[s._v("语法：db.createCollection('集合名')")])]),s._v(" "),a("p",[a("strong",[s._v("（3）删除集合")])]),s._v(" "),a("p",[s._v("步骤一：选择数据库")]),s._v(" "),a("blockquote",[a("p",[s._v("语法：use 数据库名")])]),s._v(" "),a("p",[s._v("步骤二：创建集合")]),s._v(" "),a("blockquote",[a("p",[s._v("语法：db.集合名.drop()")])]),s._v(" "),a("h3",{attrs:{id:"_3-集合中数据的增"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-集合中数据的增"}},[s._v("#")]),s._v(" 3.集合中数据的增")]),s._v(" "),a("blockquote",[a("p",[s._v("语法：db.集合名.insert(JSON 数据)")])]),s._v(" "),a("ul",[a("li",[s._v("说明：集合存在，则直接插入数据；集合不存在，隐式创建。插入的 json 数据的键统一不加引号，但查看集合数据时系统自动加。")]),s._v(" "),a("li",[s._v("练习：")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("use test2\ndb.c1.insert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("usename:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),s._v(",age:18"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"_4-集合中数据的删"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-集合中数据的删"}},[s._v("#")]),s._v(" 4.集合中数据的删")]),s._v(" "),a("blockquote",[a("p",[s._v("语法：db.集合名.remove(条件，[,是删除一条])")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("说明：是否删除一条：true，是；false，否，默认")])]),s._v(" "),a("li",[a("p",[s._v("练习：")])])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除一条")]),s._v("\ndb.c3.remove"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",true"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除全部")]),s._v("\ndb.c3.remove"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"_5-集合中数据的改"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-集合中数据的改"}},[s._v("#")]),s._v(" 5.集合中数据的改")]),s._v(" "),a("p",[a("strong",[s._v("（1）基本语法")])]),s._v(" "),a("blockquote",[a("p",[s._v("语法：db.集合名.update(条件，新数据[,是否新增,是否修改多条])")])]),s._v(" "),a("ul",[a("li",[s._v("说明：\n是否新增：指条件匹配不到数据则插入（true 插入;false 不插入，默认）\n是否修改多条：指将匹配成功的数据都修改（true 是；false 否，默认）")]),s._v(" "),a("li",[s._v("练习：")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将zs1改为zs2；发现不是修改而是替换")]),s._v("\ndb.test.update"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("name:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zs1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(","),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("name:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zs2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这样写才是修改")]),s._v("\ndb.test.update"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("name:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zs1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(","),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$set")]),s._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("name:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zs2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("strong",[s._v("（2）升级语法")])]),s._v(" "),a("blockquote",[a("p",[s._v("语法：db.集合名.update(条件，{修改器：{键:值}})")])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("修改器")]),s._v(" "),a("th",[s._v("作用")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("$in")]),s._v(" "),a("td",[s._v("递增")])]),s._v(" "),a("tr",[a("td",[s._v("$rename")]),s._v(" "),a("td",[s._v("重命名列")])]),s._v(" "),a("tr",[a("td",[s._v("$set")]),s._v(" "),a("td",[s._v("修改列值")])]),s._v(" "),a("tr",[a("td",[s._v("$unset")]),s._v(" "),a("td",[s._v("删除列")])])])]),s._v(" "),a("h3",{attrs:{id:"_6-集合中数据的查"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-集合中数据的查"}},[s._v("#")]),s._v(" 6.集合中数据的查")]),s._v(" "),a("p",[a("strong",[s._v("（1）基本语法")])]),s._v(" "),a("blockquote",[a("p",[s._v("语法：db.集合名.find(条件 [,查询的列])")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("条件：\n    查询所有数据        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("或者不写\n    查询age"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("的数据     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("age:6"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    既要age"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("又要性别"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("男的数据     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("age:6，sex:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'男'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n查询的列（可选参数）\n    不写：查询全部列\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("age:1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("：只显示age列（此时条件也要写上，可写"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("）\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("age:0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("：除了age列都显示\n不管怎么写，系统自定义的_id都会在\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[a("strong",[s._v("（2）升级语法")])]),s._v(" "),a("blockquote",[a("p",[s._v("语法：db.集合名.find({键:{运算符:值}})")])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("运算符")]),s._v(" "),a("th",[s._v("作用")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("$gt")]),s._v(" "),a("td",[s._v("大于")])]),s._v(" "),a("tr",[a("td",[s._v("$gte")]),s._v(" "),a("td",[s._v("大于等于")])]),s._v(" "),a("tr",[a("td",[s._v("$lt")]),s._v(" "),a("td",[s._v("小于")])]),s._v(" "),a("tr",[a("td",[s._v("$lte")]),s._v(" "),a("td",[s._v("小于等于")])]),s._v(" "),a("tr",[a("td",[s._v("$ne")]),s._v(" "),a("td",[s._v("不等于")])]),s._v(" "),a("tr",[a("td",[s._v("$in")]),s._v(" "),a("td",[s._v("in")])]),s._v(" "),a("tr",[a("td",[s._v("$nin")]),s._v(" "),a("td",[s._v("not in")])])])]),s._v(" "),a("h3",{attrs:{id:"_7-排序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-排序"}},[s._v("#")]),s._v(" 7.排序")]),s._v(" "),a("blockquote",[a("p",[s._v("语法：db.集合名.find().sort(JSON 数据)")])]),s._v(" "),a("ul",[a("li",[s._v("说明：键：要排序的字段/列；值：1，升序；-1，降序")]),s._v(" "),a("li",[s._v("练习")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 降序")]),s._v("\ndb.test.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".sort"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("age:-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 升序")]),s._v("\ndb.test.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".sort"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("age:1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"_8-分页"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-分页"}},[s._v("#")]),s._v(" 8.分页")]),s._v(" "),a("blockquote",[a("p",[s._v("语法：db.集合名.find().sort().skip(数字).limit(数字)")])]),s._v(" "),a("ul",[a("li",[s._v("说明：skip 跳过指定数量（可选），limit 限制查询的数据；数字：在使用的时候，数字必须是 number 类型，不能为字符串数据等。")]),s._v(" "),a("li",[s._v("练习：1.降序查询两条；2.降序跳过 2 条并查询 2 条")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1")]),s._v("\ndb.test.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".sort"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("age:-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".skip"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".limit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2")]),s._v("\ndb.test.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".sort"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("age:-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".skip"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".limit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3.数据库1到10条数据，每页显示两条（5页）")]),s._v("\ndb.集合名.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".sort"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".skip"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("((")]),s._v("当前页-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("*每页显示的条数"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".limit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("数字"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h3",{attrs:{id:"_9-聚合查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-聚合查询"}},[s._v("#")]),s._v(" 9.聚合查询")]),s._v(" "),a("blockquote",[a("p",[s._v("语法：db.集合名.aggregate([{管道:{表达式}}...])")])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("常用管道")]),s._v(" "),a("th",[s._v("作用")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("$group")]),s._v(" "),a("td",[s._v("将集合中的文档分组，用于统计结果")])]),s._v(" "),a("tr",[a("td",[s._v("$match")]),s._v(" "),a("td",[s._v("过滤数据，只要数据符合条件的文档")])]),s._v(" "),a("tr",[a("td",[s._v("$sort")]),s._v(" "),a("td",[s._v("聚合数据进一步排序")])]),s._v(" "),a("tr",[a("td",[s._v("$skip")]),s._v(" "),a("td",[s._v("跳过指定文档数")])]),s._v(" "),a("tr",[a("td",[s._v("$limit")]),s._v(" "),a("td",[s._v("限制集合数据返回文档数")])])])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("常用表达式")]),s._v(" "),a("th",[s._v("作用")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("$sum")]),s._v(" "),a("td",[s._v("总和;$sum:1,同平常用的 count 一样,表示统计")])]),s._v(" "),a("tr",[a("td",[s._v("$avg")]),s._v(" "),a("td",[s._v("平均")])]),s._v(" "),a("tr",[a("td",[s._v("$min")]),s._v(" "),a("td",[s._v("最小值")])]),s._v(" "),a("tr",[a("td",[s._v("$max")]),s._v(" "),a("td",[s._v("最大值")])])])]),s._v(" "),a("ul",[a("li",[s._v("练习")])]),s._v(" "),a("p",[s._v("已有数据")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" db.test."),a("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("find")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_id"')]),s._v(":1,"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"a"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sex"')]),s._v(":1,"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),s._v(":1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_id"')]),s._v(":2,"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"a"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sex"')]),s._v(":1,"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),s._v(":2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_id"')]),s._v(":3,"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"b"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sex"')]),s._v(":2,"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),s._v(":3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_id"')]),s._v(":4,"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"c"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sex"')]),s._v(":2,"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),s._v(":4"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_id"')]),s._v(":5,"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"d"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sex"')]),s._v(":2,"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),s._v(":5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#统计男生、女生的总年龄")]),s._v("\ndb.test.aggregate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$group")]),s._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            _id:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$sex")]),s._v('"')]),s._v(",      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#分组年龄")]),s._v("\n            rs:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$sum")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$age")]),s._v('"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#求男女生年龄总和")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#统计男生、女生的总人数")]),s._v("\ndb.test.aggregate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$group")]),s._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            _id:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$sex")]),s._v('"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#id是用来按字段分组的,这里是按年龄分组")]),s._v("\n            rs:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$sum")]),s._v(":1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#求男女生年龄总和")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#求学生总数和平均年龄")]),s._v("\ndb.test.aggregate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$group")]),s._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            _id:null,    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#按全部字段分组")]),s._v("\n            total_num:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$sum")]),s._v(":1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            total_avg:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$avg")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$age")]),s._v('"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查询男生、女生人数，按人数升序")]),s._v("\ndb.test.aggregate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$group")]),s._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("_id:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$sex")]),s._v('"')]),s._v(",rs:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$sum")]),s._v(":1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$sort")]),s._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("rs:1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br")])]),a("h3",{attrs:{id:"_10-索引"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10-索引"}},[s._v("#")]),s._v(" 10.索引")]),s._v(" "),a("p",[a("strong",[s._v("（1）优缺点")])]),s._v(" "),a("ul",[a("li",[s._v("优点\n"),a("blockquote",[a("p",[s._v("提高数据查询效率，降低数据库的 IO 成本；通过索引对数据进行排序，降低数据排序的成本，降低 CPU 的消耗。")])])]),s._v(" "),a("li",[s._v("缺点\n"),a("blockquote",[a("p",[s._v("占用磁盘空间；大量索引影响 SQL 语句效率，因为每次插入和修改数据都需要更新索引。")])])])]),s._v(" "),a("p",[a("strong",[s._v("（2）创建索引")])]),s._v(" "),a("blockquote",[a("p",[s._v("db.集合名.createIndex(待创建索引的列[,额外选项])")])]),s._v(" "),a("ul",[a("li",[s._v("参数：\n待创建索引的列：{键:1,...,键:-1}\n说明：1，升序；-1 降序\n额外选项：设置索引名称或者唯一索引")])]),s._v(" "),a("p",[a("strong",[s._v("（3）删除索引")])]),s._v(" "),a("blockquote",[a("p",[s._v("全部删除：db.集合名.dropIndexes()\n删除指定：db.集合名.dropIndexes(索引名)")])]),s._v(" "),a("p",[a("strong",[s._v("（4）查看索引")])]),s._v(" "),a("blockquote",[a("p",[s._v("db.集合名.getIndexes()")])]),s._v(" "),a("p",[a("strong",[s._v("（5）示例")])]),s._v(" "),a("p",[s._v("向数据库中新增数据")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("use testbase\nfor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("var "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("i")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("i++"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    db.testcollecion"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'name'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"aa"')]),s._v("+i,"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),s._v(":i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1.给name添加普通索引")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" db.testcollecion.createIndex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("name:1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" db.testcollecion.getIndexes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看当前索引")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v"')]),s._v(":2,\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"key"')]),s._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#给哪个列设置了索引")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_id"')]),s._v(":1\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_id_"')]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ns"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test5.testcollecion"')]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v"')]),s._v(":2,\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"key"')]),s._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),s._v(":1\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name_1"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#索引名称，默认系统生成，也可以自定义")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ns"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test5.testcollecion"')]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2.删除name索引")]),s._v("\ndb.testcollecion.dropIndexes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'name_1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3.给name创建索引并起名demo")]),s._v("\ndb.c1.createIndex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),s._v(":1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(","),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("name:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dmeo"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br")])]),a("p",[a("strong",[s._v("（6）创建复合/组合索引")])]),s._v(" "),a("blockquote",[a("p",[s._v("语法：db.集合名.createIndex({键 1:方式 1,键 2:方式 2}")])]),s._v(" "),a("ul",[a("li",[s._v("说明：及时一次性给两个字段建立索引")]),s._v(" "),a("li",[s._v("应用场景：两个条件一起出现；查询慢的时候")]),s._v(" "),a("li",[s._v("练习")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 给name和age添加组合索引")]),s._v("\ndb.testcollecion.createIndex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("name:1,age:1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("（7）创建唯一索引")])]),s._v(" "),a("blockquote",[a("p",[s._v("语法：db.集合名.createIndex(待添加索引的列,{unique:列名})")])]),s._v(" "),a("ul",[a("li",[s._v("练习")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置唯一索引")]),s._v("\ndb.testcollecion.createIndex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("name:1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(","),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("unique:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("（8）分析索引")])]),s._v(" "),a("blockquote",[a("p",[s._v("前言：通过分析索引，可以了解这条数据是创建索引效率高还是不创建的时候高。")])]),s._v(" "),a("blockquote",[a("p",[s._v("语法：db.集合名.find().explain('executionStats')")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查询age=18的数据")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" db.test.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("age:18"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".explain"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'executionStats'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("结果分析：")])]),s._v(" "),a("ul",[a("li",[s._v("stage:COLLSCAN，全表扫描，最慢；IXSCAN，索引扫描，比较快；FETCH，根据索引去检索指定 document，比较快。")]),s._v(" "),a("li",[s._v("executionTimeMillis:消耗的时间，可以在添加索引前后查看这个数据，看看是否需要添加索引。")])]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/xibuhaohao/p/12076445.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("关于详细的结果参数分析"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("strong",[s._v("选择规则（如何选择合适的列创建索引）：")])]),s._v(" "),a("ul",[a("li",[s._v("为常做条件、排序、分组的字段建立索引")]),s._v(" "),a("li",[s._v("选择唯一性索引\n"),a("blockquote",[a("p",[s._v("如性别字段，同值较少，5万男，5万女，无意义。")])])]),s._v(" "),a("li",[s._v("选择较小的数据列，为较长的字符串使用前缀索引\n索引也是占磁盘空间的。")])]),s._v(" "),a("h2",{attrs:{id:"二-可视化形式的操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二-可视化形式的操作"}},[s._v("#")]),s._v(" 二.可视化形式的操作")]),s._v(" "),a("p",[a("code",[s._v("增、删、改、查")]),s._v("基本使用与"),a("code",[s._v("SQL")]),s._v(","),a("code",[s._v("MySQL")]),s._v("等数据库相差不大。")])])}),[],!1,null,null,null);t.default=e.exports}}]);